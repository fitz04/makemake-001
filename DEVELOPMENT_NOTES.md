# Makemake ê°œë°œ ë…¸íŠ¸

## í”„ë¡œì íŠ¸ ê°œìš”
Godot 4.5 ê¸°ë°˜ Makemake ì™œí–‰ì„± íƒì‚¬ ê²Œì„. Voxel Terrain í”ŒëŸ¬ê·¸ì¸ì„ ì‚¬ìš©í•œ ì ˆì°¨ì  ì§€í˜• ìƒì„±.

**ğŸ“š ê´€ë ¨ ë¬¸ì„œ:**
- [BIOME_IMPLEMENTATION.md](BIOME_IMPLEMENTATION.md) - ë°”ì´ì˜´ ì‹œìŠ¤í…œ ìƒì„¸ ì„¤ê³„ ë° êµ¬í˜„ ê³„íš
- [CHANGELOG.md](CHANGELOG.md) - ë²„ì „ë³„ ë³€ê²½ ì´ë ¥
- ì´ ë¬¸ì„œ (DEVELOPMENT_NOTES.md) - ê¸°ìˆ ì  ì´ìŠˆ, ì„¤ì •, ë””ë²„ê¹… ê°€ì´ë“œ

> **ğŸ’¡ ì„¸ì…˜ ì—°ì†ì„±:** ìƒˆë¡œìš´ ì‘ì—… ì„¸ì…˜ì„ ì‹œì‘í•  ë•ŒëŠ” ìœ„ ì„¸ ë¬¸ì„œë¥¼ ëª¨ë‘ ê²€í† í•˜ì—¬ í”„ë¡œì íŠ¸ì˜ í˜„ì¬ ìƒíƒœ, ê³„íšëœ ê¸°ëŠ¥, ì•Œë ¤ì§„ ì´ìŠˆë¥¼ íŒŒì•…í•˜ì„¸ìš”.

---

## ì£¼ìš” ì´ìŠˆ ë° ë°œê²¬ì‚¬í•­

### 1. ì§€í˜• í¬ê¸° ë™ê¸°í™” ì´ìŠˆ âš ï¸

**ë¬¸ì œ:** `graph.set_node_param()`ì´ ì§€í˜• ë°˜ì§€ë¦„ ì„¤ì •ì— ì‘ë™í•˜ì§€ ì•ŠìŒ
- ìœ„ì¹˜: [solar_system_setup.gd:252](solar_system/solar_system_setup.gd#L252)
- ì˜í–¥: ë‘ íŒŒì¼ ê°„ ì§€í˜• í¬ê¸°ë¥¼ ìˆ˜ë™ìœ¼ë¡œ ë™ê¸°í™”í•´ì•¼ í•¨

**ì¼ì¹˜í•´ì•¼ í•˜ëŠ” íŒŒì¼ë“¤:**
- `solar_system_setup.gd` 73ë²ˆì§¸ ì¤„: `planet.radius = 8000.0`
- `voxel_graph_planet_v4.tres` 205ë²ˆì§¸ ì¤„: `"radius": 8000.0`

**ë¶ˆì¼ì¹˜ ì‹œ ì¦ìƒ:**
- ìš°ì£¼ì„ ì´ ì˜ëª»ëœ ë†’ì´ì— ìŠ¤í°ë¨
- í”Œë ˆì´ì–´ê°€ ì§€í˜•ì„ ëš«ê³  ë–¨ì–´ì§€ê±°ë‚˜ ìš°ì£¼ì— ìŠ¤í°ë¨
- ì¶©ëŒ ê°ì§€ ì‹¤íŒ¨

**ì„ì‹œ í•´ê²°ì±…:**
1. solar_system_setup.gdì—ì„œ `planet.radius` ë³€ê²½
2. voxel_graph_planet_v4.tres 205ë²ˆì§¸ ì¤„ ìˆ˜ë™ í¸ì§‘
3. ë‘ ê°’ì´ ì •í™•íˆ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸

**TODO:** `graph.set_node_param()`ì´ ë°˜ì§€ë¦„ ë³€ê²½ì„ ì ìš©í•˜ì§€ ëª»í•˜ëŠ” ì´ìœ  ì¡°ì‚¬

---

### 2. ìŠ¤í° ë†’ì´ ë° ì§€í˜• ìƒì„± íƒ€ì´ë°

**ë¬¸ì œ:** ë³µì…€ ë©”ì‹œ ìƒì„± ì „ì— ìš°ì£¼ì„ ì´ ì§€í˜•ì„ ëš«ê³  ë–¨ì–´ì§
- ìœ„ì¹˜: [solar_system.gd:128](solar_system/solar_system.gd#L128)

**ê·¼ë³¸ ì›ì¸:**
- VoxelLodTerrainì€ ë©”ì‹œë¥¼ ë¹„ë™ê¸°ì ìœ¼ë¡œ ìƒì„±í•¨
- ë³µì¡í•œ ì§€í˜•(ë†’ì€ octaves/gain)ì€ ìƒì„± ì‹œê°„ì´ ë” ì˜¤ë˜ ê±¸ë¦¼
- ì¶©ëŒ ë©”ì‹œê°€ ì¤€ë¹„ë˜ê¸° ì „ì— ìš°ì£¼ì„  ë¬¼ë¦¬ ì—°ì‚°ì´ ì‹œì‘ë¨

**í˜„ì¬ í•´ê²°ì±…:**
```gdscript
var spawn_height := makemake.radius + 150.0  // 150m ì•ˆì „ ì—¬ìœ 
for i in range(120):  // í”„ë ˆì„ ê¸°ë°˜ ì§€ì—°
    await get_tree().process_frame
```

**í…ŒìŠ¤íŠ¸ëœ ê°’ë“¤:**
- 5m: ë„ˆë¬´ ë‚®ìŒ - ìš°ì£¼ì„  ì¶©ëŒ ìº¡ìŠì´ 16m ë†’ì´
- 20m: ê°„ì‹ íˆ ì‘ë™ - ê¼¬ë¦¬ê°€ ì§€í˜•ì„ ëš«ìŒ
- 50m: ë‹¨ìˆœ ì§€í˜•ì—ì„œ ì‘ë™ (octaves=5, gain=0.2)
- 100-150m: ë³µì¡í•œ ì§€í˜•ì— í•„ìš” (octaves=7, gain=0.5)

**ì‹œìŠ¤í…œ ì˜ì¡´ì„±:**
- í”„ë ˆì„ ì¹´ìš´íŠ¸ëŠ” í•˜ë“œì›¨ì–´ë§ˆë‹¤ ì‹ ë¢°í•  ìˆ˜ ì—†ìŒ
- ëŠë¦° ì‹œìŠ¤í…œì€ ë” ë†’ì€ ìŠ¤í° ë†’ì´ë‚˜ ë” ë§ì€ í”„ë ˆì„ì´ í•„ìš”í•  ìˆ˜ ìˆìŒ
- `is_area_meshed()`ê°€ 50% ì§„í–‰ì—ì„œ ë©ˆì¶¤ (ì²­í¬ ë²”ìœ„ ì´ìŠˆ)

**ë” ë‚˜ì€ í•´ê²°ì±… ì•„ì´ë””ì–´:**
1. íŠ¹ì • ì²­í¬ ì˜ì—­ì˜ ë©”ì‹œ ì™„ë£Œë¥¼ ê¸°ë‹¤ë¦¼ (í˜„ì¬ ê³ ì¥ë‚¨)
2. ì§€í˜• ì¤€ë¹„ ì‹œ ì‹œê·¸ë„ ê¸°ë°˜ ì ‘ê·¼ ì‚¬ìš©
3. í‘œë©´ ì•„ë˜ë¡œ ë–¨ì–´ì§ˆ ë•Œ ì¬ìŠ¤í°í•˜ëŠ” ë¶€ë“œëŸ¬ìš´ ë‚™í•˜ êµ¬í˜„

---

### 3. ì´ˆê¸°í™” ì¤‘ Null ì°¸ì¡° ì˜¤ë¥˜

**ì˜¤ë¥˜ 1: camera.gd 106ë²ˆì§¸ ì¤„**
```
Invalid access to property or key 'global_transform' on a base object of type 'Nil'
```

**ì›ì¸:** ìš°ì£¼ì„  í• ë‹¹ ì „ì— `_physics_process`ê°€ ì‹¤í–‰ë  ë•Œ `_target`ì´ null

**ìˆ˜ì •:**
```gdscript
func _get_target_transform() -> Transform3D:
    if _target == null:
        return Transform3D()  // ê°€ë“œ ì ˆ
    return _target.global_transform
```

**ì˜¤ë¥˜ 2: solar_system.gd 377ë²ˆì§¸ ì¤„**
```
Invalid access to property or key 'global_transform' on a base object of type 'Nil'
```

**ì›ì¸:** `static_bodies` ë°°ì—´ì— null ìš”ì†Œê°€ í¬í•¨ë¨

**ìˆ˜ì •:**
```gdscript
for sb in previous_body.static_bodies:
    if sb != null and sb.get_parent() != null:  // Null ì²´í¬
        sb.get_parent().remove_child(sb)
```

---

## ì§€í˜• ì„¤ì •

### í˜„ì¬ ì„¤ì • (voxel_graph_planet_v4.tres)

**í–‰ì„± í¬ê¸°:**
- ë°˜ì§€ë¦„: 8000.0 (8km)
- í…ŒìŠ¤íŠ¸ëœ ë²”ìœ„: 2km (ë„ˆë¬´ ì‘ìŒ), 80km (ë„ˆë¬´ í¼, 3GB RAM)

**ì§€í˜• ë³µì¡ë„:**
- `fractal_octaves`: 7 (ì´ì „ 5)
- `fractal_gain`: 0.5 (ì´ì „ 0.2)
- `height_multiplier`: -80.0 (ì´ì „ -30.0)

**íš¨ê³¼:**
- ë†’ì€ octaves = ë” ë§ì€ ë””í…Œì¼, ë‚ ì¹´ë¡œìš´ íŠ¹ì§•
- ë†’ì€ gain = ê±°ì¹œ ì§€í˜•, ë” ë§ì€ ë³€í™”
- ë†’ì€ height multiplier = ë” ë†’ì€ ì‚°/ë” ê¹Šì€ ê³„ê³¡

**ì„±ëŠ¥ ì˜í–¥:**
- octaves=7, gain=0.5: ~3GB RAM, ë” ê¸´ ìƒì„± ì‹œê°„
- ë³µì¡í•œ ì§€í˜•ì€ ë” ë†’ì€ ìŠ¤í° ë†’ì´ í•„ìš” (150m vs 50m)

### ì•”ì„/ì”í•´ ë°€ë„ (solar_system_setup.gd)

**ê¹”ë”í•œ í‘œë©´ì„ ìœ„í•´ ê°ì†Œ:**
- ìê°ˆ: 0.015 (ì´ì „ 0.15) - 90% ê°ì†Œ
- ë°”ìœ„: 0.02 (ì´ì „ 0.08) - 75% ê°ì†Œ
- í° ë°”ìœ„: 0.01 (ì´ì „ 0.03) - 67% ê°ì†Œ
- ì„ìˆœ: 0.02 (ì´ì „ 0.06) - 67% ê°ì†Œ

---

## ì™¸í˜• ì„¤ì •

### ì–¼ìŒ ì™œí–‰ì„± ëª¨ìŠµ
```gdscript
// solar_system_setup.gd:245
mat.set_shader_parameter(&"u_top_modulate", Color(0.9, 0.95, 1.0))
```
- ì–¼ìŒ ê°™ì€ ì™¸í˜•ì„ ìœ„í•œ ì—°í•œ ì²­íšŒìƒ‰ ìƒ‰ì¡°
- ì‹¤ì œ Makemake ê´€ì¸¡ ê²°ê³¼ì™€ ì¼ì¹˜ (ë°ê³  íšŒìƒ‰ë¹› í‘œë©´)

---

## ìš°ì£¼ì„  ì„¤ì •

### ì¶©ëŒ ìº¡ìŠ
[ship.tscn:21-23](ship/ship.tscn#L21-L23)ì—ì„œ:
```tres
[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_rrvor"]
radius = 3.03344
height = 16.0
```

**ì˜ë¯¸:**
- ìµœì†Œ ì•ˆì „ ìŠ¤í° ë†’ì´: 11m (ì ˆë°˜ ë†’ì´ + ë°˜ì§€ë¦„)
- ì‹¤ì œ ìŠ¤í° ë†’ì´: 150m (ì§€í˜• ìƒì„± ì§€ì—° ê³ ë ¤)
- ì¶©ëŒ ìº¡ìŠì´ ìš°ì£¼ì„  ì¤‘ì‹¬ ìœ„ì•„ë˜ë¡œ 8m í™•ì¥

---

## ê³„íšëœ ê¸°ëŠ¥ (BIOME_IMPLEMENTATION.md)

### ì„¤ê³„ëœ 5ê°œ ë°”ì´ì˜´:
1. **ì°©ë¥™ ë¶„ì§€ (Landing Basin)** - ë©”ì¸ ê¸°ì§€, í‰íƒ„í™”ëœ ì§€ì—­ (ë°˜ì§€ë¦„ 500m)
2. **ê·¹ì €ì˜¨ í‰ì› (Cryo Plains)** - ì–¼ìŒ ì±„êµ´ ì§€ì—­, ì–¼ì–´ë¶™ì€ í‘œë©´
3. **ê´‘ì„ ê³ ì§€ëŒ€ (Ore Highlands)** - ê¸ˆì† ì±„êµ´, ë…¸ì¶œëœ ê¸°ë°˜ì•” (+50m ê³ ë„)
4. **í™”ì—¼-ì–¼ìŒ ë¶„ì§€ (Fire-Ice Basin)** - ë©”íƒ„ í•˜ì´ë“œë ˆì´íŠ¸ í¬ë ˆì´í„° (ë°˜ì§€ë¦„ 800m, ê¹Šì´ -150m)
5. **ì‚´ì•„ìˆëŠ” ê´‘ë§¥ í˜‘ê³¡ (Living Lode Canyon)** - í……ìŠ¤í… ê´‘ë§¥, ì™¸ê³„ ìƒëª…ì²´, ê¹Šì€ í˜‘ê³¡

### êµ¬í˜„ ë‹¨ê³„:
- Phase 1: ë°”ì´ì˜´ ì‹œê°ì  ìƒ‰ìƒ (2-3ì‹œê°„)
- Phase 2: ì§€í˜• í˜•ì„± (4-6ì‹œê°„)
- Phase 3: ìì› ë¶„í¬ (3-4ì‹œê°„)
- Phase 4: ê²Œì„í”Œë ˆì´ í†µí•© (2-3ì‹œê°„)
- Phase 5: ì™„ì„±ë„ ë° íš¨ê³¼ (4-5ì‹œê°„)

**ì´ ì˜ˆìƒ ì‹œê°„:** 15-20ì‹œê°„

---

## ê°œë°œ ì›Œí¬í”Œë¡œìš°

### ë²„ì „ ê´€ë¦¬ ì„¤ì •
- Git ì´ˆê¸°í™”ë¨
- ì²« ì»¤ë°‹: fc6f5f9
- 378ê°œ íŒŒì¼, 58,570ì¤„ ì»¤ë°‹ë¨
- Godot 4ìš© `.gitignore` ì„¤ì •ë¨

### ì¶”ì í•´ì•¼ í•  ì£¼ìš” íŒŒì¼
**í–‰ì„± í¬ê¸° ë³€ê²½ ì‹œ í•­ìƒ í•¨ê»˜ ì»¤ë°‹:**
- solar_system_setup.gd (73ë²ˆì§¸ ì¤„)
- voxel_graph_planet_v4.tres (205ë²ˆì§¸ ì¤„)

**ìˆ˜ì • í›„ í•­ìƒ í…ŒìŠ¤íŠ¸:**
- ì§€í˜• ìƒì„± ë§¤ê°œë³€ìˆ˜ â†’ ìŠ¤í° ë†’ì´
- ìŠ¤í° ë†’ì´ â†’ í”„ë ˆì„ ì§€ì—° ì¹´ìš´íŠ¸
- ì•”ì„ ë°€ë„ â†’ ì‹œê°ì  ì™¸í˜•

---

## ì•Œë ¤ì§„ ë²„ê·¸

### í™œì„± ì´ìŠˆ
1. âš ï¸ **ë†’ì€ ìš°ì„ ìˆœìœ„:** ì§€í˜• ë°˜ì§€ë¦„ì— ëŒ€í•´ `graph.set_node_param()` ì‘ë™ ì•ˆ í•¨
2. âš ï¸ **ì¤‘ê°„ ìš°ì„ ìˆœìœ„:** í”„ë ˆì„ ê¸°ë°˜ ìŠ¤í° ì§€ì—°ì´ ëŠë¦° í•˜ë“œì›¨ì–´ì—ì„œ ì‹ ë¢°í•  ìˆ˜ ì—†ìŒ
3. âš ï¸ **ë‚®ì€ ìš°ì„ ìˆœìœ„:** `is_area_meshed()`ê°€ 50% ì§„í–‰ì—ì„œ ë©ˆì¶¤

### ì ìš©ëœ ì„ì‹œ í•´ê²°ì±…
1. ìˆ˜ë™ .tres íŒŒì¼ í¸ì§‘
2. ë³´ìˆ˜ì ì¸ 150m ìŠ¤í° ë†’ì´ + 120 í”„ë ˆì„ ì§€ì—°
3. `is_area_meshed()` ì™„ì „íˆ íšŒí”¼

---

## ì„±ëŠ¥ ë…¸íŠ¸

### ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰
- 8km í–‰ì„±, octaves=7, gain=0.5: ~3GB RAM
- 80km í–‰ì„±: 3GB ì´ˆê³¼, í”„ë ˆì„ ë“œë

### ì§€í˜• ìƒì„± ì‹œê°„
- ë‹¨ìˆœ ì§€í˜• (octaves=5, gain=0.2): ~1-2ì´ˆ
- ë³µì¡í•œ ì§€í˜• (octaves=7, gain=0.5): ~3-5ì´ˆ
- ì‹œìŠ¤í…œ ì˜ì¡´ì , í¬ê²Œ ë‹¤ë¥¼ ìˆ˜ ìˆìŒ

### ê¶Œì¥ ì„¤ì •
- í–‰ì„± ë°˜ì§€ë¦„: 5-10km (íƒí—˜ì— ìµœì )
- Octaves: 6-7 (ê³¼ë„í•œ ë©”ëª¨ë¦¬ ì—†ì´ ì¢‹ì€ ë””í…Œì¼)
- ìŠ¤í° ë†’ì´: 100-150m (ë³µì¡í•œ ì§€í˜•ì— ì•ˆì „)

---

## ë””ë²„ê¹… íŒ

### ì¼ë°˜ì ì¸ ë¬¸ì œ ë° í•´ê²°ì±…

**ë¬¸ì œ: ìš°ì£¼ì„ ì´ ì§€í˜•ì„ ëš«ê³  ë–¨ì–´ì§**
- í™•ì¸: solar_system.gd:128ì˜ ìŠ¤í° ë†’ì´
- í™•ì¸: solar_system.gd:117ì˜ í”„ë ˆì„ ì§€ì—° ì¹´ìš´íŠ¸
- í™•ì¸: ë‘ íŒŒì¼ì—ì„œ í–‰ì„± ë°˜ì§€ë¦„ ì¼ì¹˜
- í•´ê²°: ìŠ¤í° ë†’ì´ë¥¼ 50mì”© ì¦ê°€

**ë¬¸ì œ: ì§€í˜• í¬ê¸°ê°€ ì´ìƒí•¨**
- í™•ì¸: voxel_graph_planet_v4.tres 205ë²ˆì§¸ ì¤„ ë°˜ì§€ë¦„
- í™•ì¸: solar_system_setup.gd 73ë²ˆì§¸ ì¤„ ë°˜ì§€ë¦„
- í•´ê²°: ë‘ ê°’ì´ ì •í™•íˆ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸

**ë¬¸ì œ: ê²Œì„ì´ ì‹œì‘ ì‹œ í¬ë˜ì‹œ**
- í™•ì¸: camera.gd:106ì˜ Null ì°¸ì¡° ì˜¤ë¥˜
- í™•ì¸: solar_system.gd:377ì˜ Null ì°¸ì¡° ì˜¤ë¥˜
- í•´ê²°: ì†ì„± ì ‘ê·¼ ì „ì— null ì²´í¬ ì¶”ê°€

**ë¬¸ì œ: í‘œë©´ì— ì”í•´ê°€ ë„ˆë¬´ ë§ìŒ**
- í™•ì¸: solar_system_setup.gd:347-423ì˜ ì¸ìŠ¤í„´ìŠ¤ ë°€ë„
- í•´ê²°: ë°€ë„ ê°’ ê°ì†Œ (0.01-0.02 ê¶Œì¥)

### ë””ë²„ê·¸ í”„ë¦°íŠ¸ ìœ„ì¹˜
```gdscript
// solar_system.gd:130 - ìŠ¤í° ìœ„ì¹˜ í™•ì¸
print("Spawning ship at ", spawn_pos, spawn_height, " on Makemake surface")
```

---

## íŒŒì¼ êµ¬ì¡° ì°¸ì¡°

### í•µì‹¬ ê²Œì„ ì‹œìŠ¤í…œ
- `solar_system/solar_system.gd` - ë©”ì¸ ê²Œì„ ë£¨í”„, ìŠ¤í° ë¡œì§
- `solar_system/solar_system_setup.gd` - í–‰ì„± ìƒì„±, ë¨¸í‹°ë¦¬ì–¼ ì„¤ì •
- `solar_system/stellar_body.gd` - í–‰ì„± ë°ì´í„° êµ¬ì¡°
- `camera/camera.gd` - ì¹´ë©”ë¼ ì»¨íŠ¸ë¡¤ëŸ¬
- `ship/ship.gd` - ìš°ì£¼ì„  ë¬¼ë¦¬

### ì§€í˜• ì„¤ì •
- `solar_system/voxel_graph_planet_v4.tres` - ë³µì…€ ê·¸ë˜í”„ ì •ì˜
- `solar_system/materials/planet_ground.gdshader` - ì§€í˜• ì‰ì´ë”
- `solar_system/materials/planet_material_rocky.tres` - ë¨¸í‹°ë¦¬ì–¼ ì¸ìŠ¤í„´ìŠ¤

### ë¬¸ì„œ
- `BIOME_IMPLEMENTATION.md` - ë°”ì´ì˜´ ì‹œìŠ¤í…œ ì„¤ê³„ ê°€ì´ë“œ
- `DEVELOPMENT_NOTES.md` - ì´ íŒŒì¼
- `CHANGELOG.md` - ë²„ì „ íˆìŠ¤í† ë¦¬

---

## êµ¬í˜„ ì´ë ¥

### Phase 1: ë°”ì´ì˜´ ì‹œê° ì‹œìŠ¤í…œ (2025-11-09) âœ“

**ëª©í‘œ:** 5ê°œ ì¤‘ 3ê°œ ë°”ì´ì˜´ì— ëŒ€í•œ ê¸°ë³¸ ìƒ‰ìƒ êµ¬ë¶„ êµ¬í˜„

**ë³€ê²½ ì‚¬í•­:**

1. **ì‰ì´ë” ìœ ë‹ˆí¼ ì¶”ê°€** ([planet_ground.gdshader:15-23](solar_system/materials/planet_ground.gdshader#L15-L23))
   - ì ì ˆí•œ ê¸°ë³¸ê°’ìœ¼ë¡œ 5ê°œ ë°”ì´ì˜´ ìƒ‰ìƒ ìœ ë‹ˆí¼ ì¶”ê°€
   - ê±°ë¦¬ ê³„ì‚°ì„ ìœ„í•œ `u_planet_radius` ì¶”ê°€
   - `u_landing_basin_center` ë° `u_landing_basin_radius` ì¶”ê°€

2. **ë°”ì´ì˜´ ê°ì§€ ë¡œì§** ([planet_ground.gdshader:141-161](solar_system/materials/planet_ground.gdshader#L141-L161))
   ```gdscript
   // ì°©ë¥™ ë¶„ì§€: ìŠ¤í° ì§€ì (0,0,0)ì—ì„œ ë°˜ì§€ë¦„ 500m
   // ê´‘ì„ ê³ ì§€ëŒ€: ê³ ë„ 50m ì´ìƒ
   // ê·¹ì €ì˜¨ í‰ì›: ê¸°ë³¸ ë°”ì´ì˜´ (ë‹¤ë¥¸ ëª¨ë“  ì§€ì—­)
   ```
   - ê±°ë¦¬ ê¸°ë°˜ ë° ê³ ë„ ê¸°ë°˜ ê°ì§€ ì‚¬ìš©
   - ì „í™˜ì„ ìœ„í•œ `smoothstep()`ìœ¼ë¡œ ë¶€ë“œëŸ¬ìš´ ë¸”ë Œë”© êµ¬í˜„

3. **ë§¤ê°œë³€ìˆ˜ ì„¤ì •** ([solar_system_setup.gd:252-260](solar_system/solar_system_setup.gd#L252-L260))
   - ì‰ì´ë”ì— ì „ë‹¬ëœ ëª¨ë“  ë°”ì´ì˜´ ìƒ‰ìƒ:
     - ì°©ë¥™ ë¶„ì§€: `Color(0.85, 0.88, 0.92)` - ì—°í•œ íšŒìƒ‰
     - ê·¹ì €ì˜¨ í‰ì›: `Color(0.95, 0.97, 1.0)` - ë°ì€ í°ìƒ‰
     - ê´‘ì„ ê³ ì§€ëŒ€: `Color(0.7, 0.65, 0.6)` - ê°ˆìƒ‰-íšŒìƒ‰
   - ì°©ë¥™ ë¶„ì§€ ì¤‘ì‹¬: `Vector2(0, 0)` (ìŠ¤í° ì§€ì )
   - ì°©ë¥™ ë¶„ì§€ ë°˜ì§€ë¦„: `500.0`

**ì‘ë™ ë°©ì‹:**
- ì‰ì´ë”ê°€ ì°©ë¥™ ë¶„ì§€ ì¤‘ì‹¬ìœ¼ë¡œë¶€í„° ê° í”„ë˜ê·¸ë¨¼íŠ¸ì˜ ê±°ë¦¬ë¥¼ ê³„ì‚°
- ê³ ë„ëŠ” í–‰ì„± í‘œë©´ ê¸°ì¤€ìœ¼ë¡œ ì¸¡ì •ë¨
- ë°”ì´ì˜´ ìƒ‰ìƒì´ ê¸°ë³¸ ì§€í˜• í…ìŠ¤ì²˜ì™€ ê³±í•´ì ¸ í‘œë©´ì— ìƒ‰ì¡° ë¶€ì—¬

**ì‹œê°ì  ê²°ê³¼:**
- ìš°ì£¼ì„ ì´ ì—°í•œ íšŒìƒ‰ ì°©ë¥™ ë¶„ì§€ ì§€ì—­ì— ìŠ¤í°ë¨ (ë°˜ì§€ë¦„ 500m)
- 500m ë„ˆë¨¸: ë°ì€ í°ìƒ‰ ê·¹ì €ì˜¨ í‰ì›ìœ¼ë¡œ ì „í™˜
- ë†’ì€ ê³ ë„ (>50m): ê°ˆìƒ‰-íšŒìƒ‰ ê´‘ì„ ê³ ì§€ëŒ€ ë³´ì„

**ìƒíƒœ:** âœ“ ì™„ë£Œ (2025-11-09)

---

### Phase 2A: 5ê°œ ë°”ì´ì˜´ ì™„ì„± ë° ì¬ë°°ì¹˜ (2025-11-09) âœ“

**ëª©í‘œ:** ëª¨ë“  ë°”ì´ì˜´ ì‹œê°í™” ë° ê· í˜•ì¡íŒ ë°°ì¹˜

**ë³€ê²½ ì‚¬í•­:**

1. **5ê°œ ë°”ì´ì˜´ ëª¨ë‘ êµ¬í˜„**
   - í™”ì—¼-ì–¼ìŒ ë¶„ì§€ ì¶”ê°€ (ë‚¨ìª½ 4,500m, ë°˜ì§€ë¦„ 1,800m)
   - ì‚´ì•„ìˆëŠ” ê´‘ë§¥ í˜‘ê³¡ ì¶”ê°€ (ì„œìª½ -5500~-3000m)
   - ìš°ì„ ìˆœìœ„ ê¸°ë°˜ ë°”ì´ì˜´ ê°ì§€ ì‹œìŠ¤í…œ

2. **ë°”ì´ì˜´ í¬ê¸° í™•ëŒ€ (2-3ë°°)**
   - ì°©ë¥™ ë¶„ì§€: 500m â†’ 1,200m
   - í™”ì—¼-ì–¼ìŒ: 800m â†’ 1,800m
   - í˜‘ê³¡: 1,500m â†’ 2,500m í­

3. **ë°”ì´ì˜´ ì¬ë°°ì¹˜ (ì¶©ëŒ ë°©ì§€)**
   - í™”ì—¼-ì–¼ìŒ: 3,000m â†’ 4,500m ë‚¨ìª½ (ë” ë©€ë¦¬)
   - í˜‘ê³¡: ì„œìª½ìœ¼ë¡œ ë” ì´ë™ (ì°©ë¥™ ë¶„ì§€ì™€ 1,800m ê°„ê²©)
   - ê° ë°”ì´ì˜´ ì‚¬ì´ ê·¹ì €ì˜¨ í‰ì› ì™„ì¶© ì§€ëŒ€ í™•ë³´

4. **í…ŒìŠ¤íŠ¸ìš© ê·¹ë‹¨ì  ìƒ‰ìƒ ì ìš©**
   ```gdscript
   ì°©ë¥™ ë¶„ì§€:    Color(1.2, 1.2, 1.2)     # ë§¤ìš° ë°ì€ í°ìƒ‰
   ê·¹ì €ì˜¨ í‰ì›:  Color(1.5, 1.6, 1.8)     # ê·¹ë„ë¡œ ë°ì€ ì‹œì•ˆ
   ê´‘ì„ ê³ ì§€ëŒ€:  Color(1.0, 0.5, 0.3)     # ë°ì€ ì£¼í™©-ê°ˆìƒ‰
   í™”ì—¼-ì–¼ìŒ:    Color(0.5, 1.5, 2.0)     # ë§¤ìš° ë°ì€ ì²­ë¡ìƒ‰
   í˜‘ê³¡:         Color(0.4, 0.3, 0.25)    # ë§¤ìš° ì–´ë‘ìš´ ê°ˆìƒ‰
   ```
   - HDR ê°’ (>1.0) ì‚¬ìš©ìœ¼ë¡œ ëª…í™•í•œ êµ¬ë¶„
   - ê°œë°œ ì¤‘ ë°”ì´ì˜´ ê²½ê³„ ëª…í™•íˆ í™•ì¸ ê°€ëŠ¥

**ì¡°ëª… ì„¤ì •:**
- Ambient Light Energy: 5.0 (ì›ë˜ 7.7ì—ì„œ ì¡°ì •)
- Sky Contribution: 0.88 (ìš°ì£¼ ë°°ê²½ ë°ê¸°)
- ì–´ë‘ìš´ ìš°ì£¼ í™˜ê²½ì—ì„œë„ ë°”ì´ì˜´ ìƒ‰ìƒ ëª…í™•íˆ ë³´ì„

**ìƒíƒœ:** âœ“ ì™„ë£Œ. 5ê°œ ë°”ì´ì˜´ ëª¨ë‘ ëª…í™•íˆ êµ¬ë¶„ë¨.

**ë‹¤ìŒ ë‹¨ê³„:**
- Phase 2B: ì§€í˜• í˜•ì„± (í¬ë ˆì´í„°, í˜‘ê³¡, í‰íƒ„í™”)
- Phase 3: í˜„ì‹¤ì  ìƒ‰ìƒìœ¼ë¡œ ì „í™˜

---

### Phase 3 ê³„íš: í˜„ì‹¤ì  Makemake ìƒ‰ìƒ (ë¯¸ë˜)

**ëª©í‘œ:** ì‹¤ì œ Makemake ê´€ì¸¡ ë°ì´í„° ê¸°ë°˜ ìƒ‰ìƒìœ¼ë¡œ ì „í™˜

**ê³¼í•™ì  ê·¼ê±°:**
- **ë¶‰ì€-ê°ˆìƒ‰ í†¤**: ë©”íƒ„ ì–¼ìŒì´ ìš°ì£¼ ë°©ì‚¬ì„ ì— ë…¸ì¶œë˜ì–´ "í†¨ë¦°(tholin)" í˜•ì„±
- **ë°ì€ íŒ¨ì¹˜**: ìˆœìˆ˜í•œ ë©”íƒ„ ì–¼ìŒ (ì§ˆì†Œ ì–¼ìŒ ê°€ëŠ¥)
- **ì–´ë‘ìš´ ë¶€ë¶„**: ì˜¤ë˜ëœ í‘œë©´, ë” ë§ì€ í†¨ë¦° ì¶•ì 
- **ì–¼ë£©ëœë£©í•œ íŒ¨í„´**: ê³„ì ˆì  ì–¼ìŒ ìŠ¹í™”/ì‘ê³ 

**ì œì•ˆ ìƒ‰ìƒ (NASA/ESA ê´€ì¸¡ ê¸°ë°˜):**

```gdscript
# ë©”ì¸ í‘œë©´: ë¶‰ì€-ê°ˆìƒ‰ í†¤ (ë©”íƒ„ + í†¨ë¦°)
ê·¹ì €ì˜¨ í‰ì›: Color(0.85, 0.75, 0.70)   # ì—°í•œ ë¶‰ì€-ê°ˆìƒ‰

# ë°ì€ íŒ¨ì¹˜: ì‹ ì„ í•œ ë©”íƒ„ ì–¼ìŒ
ì°©ë¥™ ë¶„ì§€: Color(0.95, 0.90, 0.85)     # ë°ì€ í¬ë¦¼ìƒ‰

# í¬ë ˆì´í„°/ì €ì§€ëŒ€: ë” ì–´ë‘ìš´ í†¨ë¦°
í™”ì—¼-ì–¼ìŒ: Color(0.65, 0.55, 0.50)     # ì–´ë‘ìš´ ê°ˆìƒ‰

# í˜‘ê³¡: ë…¸ì¶œëœ ì˜¤ë˜ëœ í‘œë©´
í˜‘ê³¡: Color(0.50, 0.40, 0.35)          # ë§¤ìš° ì–´ë‘ìš´ ê°ˆìƒ‰

# ê³ ì§€ëŒ€: í˜¼í•© í‘œë©´
ê´‘ì„ ê³ ì§€ëŒ€: Color(0.75, 0.60, 0.50)   # ì¤‘ê°„ ê°ˆìƒ‰
```

**ë°”ì´ì˜´ êµ¬ë¶„ ì „ëµ (ìƒ‰ìƒì´ ë¯¸ë¬˜í•  ë•Œ):**
1. **ì§€í˜• ì°¨ì´**: í¬ë ˆì´í„°, í˜‘ê³¡, í‰ì§€
2. **ì†Œí’ˆ ë°°ì¹˜**: ì–¼ìŒ ê²°ì •, ì•”ì„ íŒ¨í„´
3. **ì‹œê° íš¨ê³¼**: ë¯¸ë¬˜í•œ ì•ˆê°œ, íŒŒí‹°í´
4. **ì¡°ëª…**: ë°”ì´ì˜´ë³„ ë‹¤ë¥¸ ambient ìƒ‰ìƒ

**ì ìš© ì‹œê¸°:**
- Phase 2B (ì§€í˜• í˜•ì„±) ì™„ë£Œ í›„
- solar_system_setup.gdì˜ ìƒ‰ìƒ ê°’ë§Œ ë³€ê²½ (5ë¶„ ì‘ì—…)

**í…ŒìŠ¤íŠ¸ ë°©ë²•:**
1. ê·¹ë‹¨ì  ìƒ‰ìƒê³¼ í˜„ì‹¤ì  ìƒ‰ìƒ ë¹„êµ
2. ë°”ì´ì˜´ êµ¬ë¶„ ê°€ëŠ¥ ì—¬ë¶€ í™•ì¸
3. í•„ìš”ì‹œ ìƒ‰ìƒ ì±„ë„ ì¡°ì •

---

## ë‹¤ìŒ ë‹¨ê³„

### ì¦‰ì‹œ í•  ì‘ì—…
1. ~~Phase 1 ë°”ì´ì˜´ êµ¬í˜„ ì‹œì‘ (ì‹œê°ì  ìƒ‰ìƒ)~~ âœ“ ì™„ë£Œ
2. ê²Œì„ ë‚´ ë°”ì´ì˜´ ì‹œê°ì  ì „í™˜ í…ŒìŠ¤íŠ¸
3. Phase 2 ì‹œì‘: í™”ì—¼-ì–¼ìŒ ë¶„ì§€ í¬ë ˆì´í„° êµ¬í˜„ (ê¹Šì´ -150m, ë°˜ì§€ë¦„ 800m)
4. Phase 2 ì‹œì‘: ì‚´ì•„ìˆëŠ” ê´‘ë§¥ í˜‘ê³¡ í˜‘ê³¡ ì‹œìŠ¤í…œ êµ¬í˜„

### í–¥í›„ ê°œì„ ì‚¬í•­
1. `graph.set_node_param()` API ì´ìŠˆ ìˆ˜ì •
2. ì ì ˆí•œ ì§€í˜• ì¤€ë¹„ ê°ì§€ êµ¬í˜„
3. Phase 3: ë°”ì´ì˜´ë³„ ìì› ë¶„í¬ ì¶”ê°€
4. Phase 4: HUD ë°”ì´ì˜´ í‘œì‹œê¸° ìƒì„±
5. Phase 5: ë°”ì´ì˜´ë³„ í™˜ê²½ íš¨ê³¼ ì¶”ê°€

---

## ì—°ë½ì²˜ ë° ë¦¬ì†ŒìŠ¤

### Godot Voxel í”ŒëŸ¬ê·¸ì¸
- ë¬¸ì„œ: https://voxel-tools.readthedocs.io/
- ì´ìŠˆ: https://github.com/Zylann/godot_voxel/issues

### í”„ë¡œì íŠ¸ë³„ ì´ìŠˆ
- í”„ë¡œì íŠ¸ ì €ì¥ì†Œì— ì´ìŠˆ ìƒì„±
- ì ì ˆí•œ ë ˆì´ë¸”ë¡œ íƒœê·¸ ì§€ì • (bug, enhancement, terrain, biomes)

---

---

## í¬ë ˆì´í„° ìƒì„± ì‹œìŠ¤í…œ (2025-01-12) âœ“

### ê°œìš”

ë™ì  í¬ë ˆì´í„° ìƒì„± ì‹œìŠ¤í…œì„ ê°œë°œí•˜ì—¬ ìˆ˜ì‹­~ìˆ˜ë°± ê°œì˜ í¬ë ˆì´í„°ë¥¼ í”„ë¡œê·¸ë˜ë° ë°©ì‹ìœ¼ë¡œ ì¶”ê°€í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

### ìƒì„±ëœ íŒŒì¼

1. **[voxel_graph_planet_v5.tres](solar_system/voxel_graph_planet_v5.tres)** - ê¹¨ë—í•œ ìƒˆ ë² ì´ìŠ¤ ì§€í˜•
   - ê¸°ë³¸ sphere + ë‹¨ìˆœ ë…¸ì´ì¦ˆ
   - í¬ë ˆì´í„°ëŠ” ë™ì ìœ¼ë¡œ ì¶”ê°€ë¨
   - v4ë¥¼ ëŒ€ì²´í•˜ëŠ” ìƒˆë¡œìš´ ì‹œì‘ì 

2. **[crater_generator.gd](solar_system/crater_generator.gd)** - í¬ë ˆì´í„° ìƒì„± ìœ í‹¸ë¦¬í‹°
   - CraterGenerator í´ë˜ìŠ¤
   - CraterDef ë‚´ë¶€ í´ë˜ìŠ¤ (í¬ë ˆì´í„° ì •ì˜)
   - ìë™ ë…¸ë“œ ìƒì„± ë° ì—°ê²°

3. **[CRATER_SYSTEM_GUIDE.md](CRATER_SYSTEM_GUIDE.md)** - ì™„ì „í•œ ê°€ì´ë“œ
   - ì‚¬ìš©ë²• ë° ì˜ˆì œ
   - íŒŒë¼ë¯¸í„° ì„¤ëª…
   - ì»¤ìŠ¤í„°ë§ˆì´ì§• ë°©ë²•
   - ì„±ëŠ¥ ìµœì í™” íŒ

4. **[test_crater_system.gd](solar_system/test_crater_system.gd)** - í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸
   - ê¸°ë³¸ í¬ë ˆì´í„° í…ŒìŠ¤íŠ¸
   - ëœë¤ í¬ë ˆì´í„° ìƒì„±
   - ì§€ì—­ë³„ í´ëŸ¬ìŠ¤í„°

### í¬ë ˆì´í„° êµ¬ì¡°

ê° í¬ë ˆì´í„°ëŠ” 10ê°œ ë…¸ë“œë¡œ êµ¬ì„±:

```
[ê±°ë¦¬ ê³„ì‚°] 5ê°œ ë…¸ë“œ
Input X/Z â†’ Offset â†’ Square â†’ Add â†’ Sqrt = Distance

[ë³´ìš¸ (Bowl)] 2ê°œ ë…¸ë“œ
Distance â†’ Smoothstep â†’ Multiply(depth)

[ë¦¼ (Rim)] 2ê°œ ë…¸ë“œ
Distance â†’ Smoothstep â†’ Multiply(height)

[í•©ì„±] 2ê°œ ë…¸ë“œ
Terrain + Bowl â†’ + Rim
```

### ê¸°ë³¸ ì‚¬ìš©ë²•

```gdscript
# 1. ë² ì´ìŠ¤ ê·¸ë˜í”„ ë¡œë“œ
var graph = load("res://solar_system/voxel_graph_planet_v5.tres")

# 2. í¬ë ˆì´í„° ìƒì„±ê¸° ì´ˆê¸°í™”
var crater_gen = CraterGenerator.new()

# 3. í¬ë ˆì´í„° ì •ì˜
var craters = [
    CraterGenerator.CraterDef.new(
        Vector3(0, 0, 0),    # ì¤‘ì‹¬
        1200.0,              # ë°˜ì§€ë¦„
        250.0,               # ê¹Šì´
        45.0                 # ë¦¼ ë†’ì´
    )
]

# 4. ê·¸ë˜í”„ì— ì¶”ê°€
crater_gen.add_craters_to_graph(graph, craters)

# 5. ì ìš©
voxel_terrain.generator = graph
```

### í¬ë ˆì´í„° íŒŒë¼ë¯¸í„°

**í•„ìˆ˜:**
- `center`: Vector3 - í¬ë ˆì´í„° ì¤‘ì‹¬ ìœ„ì¹˜ (YëŠ” ë³´í†µ 0)
- `radius`: float - ì™¸ê³½ ë°˜ì§€ë¦„ (íš¨ê³¼ ì¢…ë£Œ ì§€ì )
- `depth`: float - í¬ë ˆì´í„° ê¹Šì´ (ì–‘ìˆ˜ë¡œ ì…ë ¥, ìë™ ìŒìˆ˜ ë³€í™˜)
- `rim_height`: float - ê°€ì¥ìë¦¬ ìœµê¸° ë†’ì´

**ì„ íƒ (ê³ ê¸‰ ì¡°ì •):**
- `bowl_flat_radius`: float - í‰í‰í•œ ë°”ë‹¥ í¬ê¸° (ê¸°ë³¸: radius Ã— 0.5)
- `rim_start_radius`: float - ë¦¼ ì‹œì‘ ì§€ì  (ê¸°ë³¸: radius Ã— 0.83)
- `rim_end_radius`: float - ë¦¼ ë ì§€ì  (ê¸°ë³¸: radius Ã— 1.08)

### í¬ë ˆì´í„° í¬ê¸° ê°€ì´ë“œ

| ë¶„ë¥˜ | ë°˜ì§€ë¦„ | ê¹Šì´ | ë¦¼ ë†’ì´ | ìš©ë„ |
|-----|--------|------|---------|------|
| ì†Œí˜• | 100-300m | 20-50m | 5-15m | ì‘ì€ ì¶©ëŒí” |
| ì¤‘í˜• | 300-800m | 50-150m | 15-30m | ì¼ë°˜ í¬ë ˆì´í„° |
| ëŒ€í˜• | 800-2000m | 150-300m | 30-60m | ì£¼ìš” ëœë“œë§ˆí¬ |
| ê±°ëŒ€ | 2000m+ | 300m+ | 60m+ | ì¶©ëŒ ë¶„ì§€ |

### ëœë¤ í¬ë ˆì´í„° ìƒì„± ì˜ˆì œ

```gdscript
func generate_random_craters(count: int, min_radius: float, max_radius: float) -> Array:
    var craters = []
    var planet_radius = 7000.0

    for i in range(count):
        var angle = randf() * TAU
        var distance = randf() * planet_radius
        var pos = Vector3(cos(angle) * distance, 0, sin(angle) * distance)

        var radius = randf_range(min_radius, max_radius)
        var depth = radius * randf_range(0.2, 0.3)
        var rim_height = radius * randf_range(0.03, 0.06)

        craters.append(CraterGenerator.CraterDef.new(pos, radius, depth, rim_height))

    return craters
```

### ì„±ëŠ¥

**ì˜¤í•´**: ë…¸ë“œê°€ ë§ìœ¼ë©´ ëŠë¦¬ë‹¤
**ì§„ì‹¤**: ë…¸ë“œ ìˆ˜ëŠ” ëŸ°íƒ€ì„ ì„±ëŠ¥ê³¼ ë¬´ê´€. ê·¸ë˜í”„ëŠ” ì»´íŒŒì¼ë˜ì–´ ìµœì í™”ë¨

**ì‹¤ì œ ë³‘ëª©:**
1. ë…¸ì´ì¦ˆ ìƒ˜í”Œë§ (ê°€ì¥ ë¹„ìŒˆ)
2. ë³µì…€ë‹¹ ê³„ì‚° ë³µì¡ë„
3. í…ìŠ¤ì²˜ ìƒ˜í”Œë§
4. ë¶„ê¸°ë¬¸ (if/else)

**ê¶Œì¥:**
- í¬ë ˆì´í„° 50-100ê°œ: ì „í˜€ ë¬¸ì œì—†ìŒ
- í¬ë ˆì´í„° 100ê°œ = 1000ê°œ ë…¸ë“œ = ì—¬ì „íˆ ê´œì°®ìŒ
- ë…¸ì´ì¦ˆ octaveë¥¼ 8 ì´í•˜ë¡œ ìœ ì§€

### ì»¤ìŠ¤í„°ë§ˆì´ì§• ë°©í–¥

#### 1. í¬ë ˆì´í„° ì£¼ë³€ ê·œì‚° ë¨¼ì§€
ì‰ì´ë”ì—ì„œ í¬ë ˆì´í„° ê±°ë¦¬ë¥¼ ì´ìš©:
```glsl
uniform vec3 u_crater_centers[10];
uniform float u_crater_radii[10];

float min_dist = 99999.0;
for (int i = 0; i < crater_count; i++) {
    float dist = length(v_local_pos.xz - u_crater_centers[i].xz);
    min_dist = min(min_dist, dist / u_crater_radii[i]);
}

float dust = smoothstep(1.5, 0.8, min_dist);
ALBEDO = mix(ALBEDO, dust_color, dust * 0.3);
```

#### 2. í¬ë ˆì´í„° ë‚˜ì´/ì¹¨ì‹
```gdscript
# ìƒˆ í¬ë ˆì´í„° - ë‚ ì¹´ë¡­ê³  ê¹ŠìŒ
var fresh = CraterGenerator.CraterDef.new(pos, 800, 200, 40)
fresh.bowl_flat_radius = 400

# ì˜¤ë˜ëœ í¬ë ˆì´í„° - ì™„ë§Œí•˜ê³  ì–•ìŒ
var old = CraterGenerator.CraterDef.new(pos, 800, 120, 15)
old.bowl_flat_radius = 600
```

#### 3. í¬ë ˆì´í„°ë³„ ë°”ì´ì˜´ ìƒ‰ìƒ
```glsl
uniform vec3 u_crater_colors[10];

for (int i = 0; i < crater_count; i++) {
    float dist = length(v_local_pos.xz - u_crater_centers[i].xz);
    if (dist < u_crater_radii[i]) {
        float blend = smoothstep(u_crater_radii[i] - 200.0, u_crater_radii[i], dist);
        biome_color = mix(u_crater_colors[i], biome_color, blend);
    }
}
```

#### 4. ë¶ˆê·œì¹™í•œ í¬ë ˆì´í„° (íƒ€ì›í˜•)
Xì™€ Z ë°©í–¥ì— ë‹¤ë¥¸ ìŠ¤ì¼€ì¼ ì ìš©í•˜ì—¬ íƒ€ì›í˜• ìƒì„± ê°€ëŠ¥

#### 5. í¬ë ˆì´í„° ê²¹ì¹¨ ìì—°ìŠ¤ëŸ½ê²Œ
```gdscript
# Add ëŒ€ì‹  Min ì‚¬ìš©
graph.add_node(combined_id, "Min", ...)

# ë˜ëŠ” SdfSmoothUnion
graph.add_node(combined_id, "SdfSmoothUnion", ...)
graph.set_node_param(combined_id, 2, 50.0)  # smoothness
```

### ì•Œë ¤ì§„ ì œí•œì‚¬í•­

1. ì™„ë²½í•œ ì›í˜• í¬ë ˆì´í„°ë§Œ ìƒì„± (ë¶ˆê·œì¹™ í˜•íƒœëŠ” ë…¸ì´ì¦ˆ ì¶”ê°€ í•„ìš”)
2. í˜„ì¬ëŠ” Addë¡œ ë‹¨ìˆœ í•©ì„± (ê²¹ì¹¨ ì‹œ ê¹Šì´ ëˆ„ì )
3. 2D íˆ¬ì˜ (êµ¬ë©´ ì¢Œí‘œê³„ ë¯¸ì‚¬ìš©)

### í–¥í›„ ê°œì„ 

- [ ] ë¶ˆê·œì¹™í•œ í¬ë ˆì´í„° í˜•íƒœ (ë…¸ì´ì¦ˆ ì¶”ê°€)
- [ ] íƒ€ì›í˜• í¬ë ˆì´í„°
- [ ] ë‹¤ì¤‘ ì¶©ëŒ í¬ë ˆì´í„°
- [ ] ì¹¨ì‹ ì‹œë®¬ë ˆì´ì…˜
- [ ] í¬ë ˆì´í„° LOD ì‹œìŠ¤í…œ
- [ ] ì‰ì´ë” í†µí•© (ë¨¼ì§€, ë°”ì´ì˜´)

### ê´€ë ¨ ë¬¸ì„œ

ìì„¸í•œ ë‚´ìš©ì€ [CRATER_SYSTEM_GUIDE.md](CRATER_SYSTEM_GUIDE.md) ì°¸ì¡°

---

## í¬ë ˆì´í„° ì‹œìŠ¤í…œ ë””ë²„ê¹… ì„¸ì…˜ (2025-01-12) âœ“

### ë¬¸ì œ ìƒí™©

ì´ˆê¸° í¬ë ˆì´í„° ìƒì„± ì‹œìŠ¤í…œ êµ¬í˜„ í›„ ë‹¤ìŒ ë¬¸ì œë“¤ ë°œìƒ:
1. ëª¨ë“  í¬ë ˆì´í„°ê°€ í•œ ì§€ì ì— ë‚˜íƒ€ë‚¨
2. ì²­í¬ ê²½ê³„ê°€ ë¶ˆê·œì¹™í•˜ê²Œ ê¹¨ì§
3. "í´ë¡œë²„" í˜•íƒœ - 3ê°œë§Œ ë³´ì´ê³  ì¤‘ì•™ì´ ë„“ê²Œ í•¨ëª°ë¨
4. í¬ë ˆì´í„°ê°€ ë³¼ë¡í•˜ê²Œ íŠ€ì–´ë‚˜ì˜´ (ì˜¤ëª©í•´ì•¼ í•˜ëŠ”ë° ë°˜ëŒ€)
5. ìš°ì£¼ì„ ì´ ìŠ¤í° ì‹œ ë•… ì†ìœ¼ë¡œ ê°€ë¼ì•‰ìŒ

### ê·¼ë³¸ ì›ì¸ ë° í•´ê²°

#### 1. SQLite ì§€í˜• ìºì‹œ ë¬¸ì œ âœ“

**ì¦ìƒ**: ì½”ë“œ ìˆ˜ì • í›„ì—ë„ ì´ì „ ì§€í˜•ì´ ê³„ì† ë¡œë“œë¨

**ì›ì¸**: `debug_data/Makemake.sqlite`ì— 11ì›” 7ì¼ì ì˜¤ë˜ëœ ì§€í˜• ë°ì´í„° ìºì‹±

**í•´ê²°**:
```bash
rm -f debug_data/Makemake.sqlite
```

**êµí›ˆ**: **ì§€í˜• ë³€ê²½ í›„ ì´ìƒí•˜ë©´ ë¬´ì¡°ê±´ SQLite ìºì‹œë¶€í„° ì‚­ì œ!**

#### 2. Godot Voxel Smoothstep íŒŒë¼ë¯¸í„° ìˆœì„œ ë°˜ëŒ€ âœ“

**ì¦ìƒ**: í¬ë ˆì´í„° ê²¹ì¹¨ ì‹œ ë„“ì€ ì§€ì—­ì´ í•¨ê»˜ ê°€ë¼ì•‰ê³  ì²­í¬ ê²½ê³„ ê¹¨ì§

**ì›ì¸**: Godot Voxelì˜ `NODE_SMOOTHSTEP`ì€ **íŒŒë¼ë¯¸í„° ìˆœì„œê°€ í‘œì¤€ê³¼ ë°˜ëŒ€**
- í‘œì¤€: `smoothstep(edge0, edge1, x)` - edge0ì—ì„œ edge1ë¡œ
- Godot Voxel: param 0 = edge1, param 1 = edge0 (ë°˜ëŒ€!)

**í•´ê²°** ([crater_generator.gd:183-184, 203-204](solar_system/crater_generator.gd#L183-L204)):
```gdscript
# Bowl falloff - SWAPPED
bowl_falloff_id = graph.create_node(VoxelGraphFunction.NODE_SMOOTHSTEP, ...)
graph.set_node_param(bowl_falloff_id, 0, crater.radius)           # param 0 = í° ê°’
graph.set_node_param(bowl_falloff_id, 1, crater.bowl_flat_radius) # param 1 = ì‘ì€ ê°’

# Rim falloff - SWAPPED
rim_falloff_id = graph.create_node(VoxelGraphFunction.NODE_SMOOTHSTEP, ...)
graph.set_node_param(rim_falloff_id, 0, crater.rim_end_radius)    # param 0 = í° ê°’
graph.set_node_param(rim_falloff_id, 1, crater.rim_start_radius)  # param 1 = ì‘ì€ ê°’
```

**êµí›ˆ**: **Godot Voxelì˜ Smoothstepì€ í•­ìƒ param 0 > param 1 ìˆœì„œë¡œ!**

#### 3. SDF ê¹Šì´ ë¶€í˜¸ ë¬¸ì œ âœ“

**ì¦ìƒ**: í¬ë ˆì´í„°ê°€ ì˜¤ëª©í•˜ì§€ ì•Šê³  ë³¼ë¡í•˜ê²Œ íŠ€ì–´ë‚˜ì˜´

**ì›ì¸**: SDFì—ì„œ `Add` ë…¸ë“œë¡œ í•©ì„± ì‹œ:
- **ì–‘ìˆ˜**: ì§€í˜•ì´ ê°€ë¼ì•‰ìŒ (í•¨ëª°, depression)
- **ìŒìˆ˜**: ì§€í˜•ì´ ì˜¬ë¼ì˜´ (ìœµê¸°, uplift)

**í•´ê²°** ([crater_generator.gd:199](solar_system/crater_generator.gd#L199)):
```gdscript
# Bowl depth - POSITIVE for depression
graph.set_node_param(bowl_depth_const_id, 0, crater.depth)  # ì–‘ìˆ˜ ì‚¬ìš©
```

**êµí›ˆ**: **SDF Add í•©ì„±ì—ì„œ ê¹Šì´ëŠ” ì–‘ìˆ˜, ìœµê¸°ëŠ” ìŒìˆ˜!**

#### 4. ì§€í˜• ìƒì„± íƒ€ì´ë° ì´ìŠˆ âœ“

**ì¦ìƒ**: ìš°ì£¼ì„  ìŠ¤í° ì‹œ ë•… ì†ìœ¼ë¡œ ê°€ë¼ì•‰ìŒ

**ì›ì¸**: ì§€í˜• ìƒì„±ì´ ìš°ì£¼ì„  ìŠ¤í°ë³´ë‹¤ ëŠ¦ê²Œ ì™„ë£Œë¨

**ê¸°ì¡´ í•´ê²°ì±…**: [solar_system.gd:106-131](solar_system/solar_system.gd#L106-L131)ì— ì´ë¯¸ 150m ì•ˆì „ ë†’ì´ ì ìš©ë¨
```gdscript
var spawn_height := makemake.radius + 150.0  # 100m above surface for safety
```

**ì‹¤ì œ ì›ì¸**: SQLite ìºì‹œê°€ ì˜ëª»ëœ ì§€í˜•ì„ ë¡œë“œí•˜ì—¬ ë†’ì´ ê³„ì‚° ì˜¤ë¥˜

**í•´ê²°**: SQLite ìºì‹œ ì‚­ì œë¡œ í•´ê²°ë¨

### ë””ë²„ê¹… ë°©ë²•ë¡ 

#### ì ì§„ì  í…ŒìŠ¤íŠ¸ ì „ëµ âœ“

1. **í¬ë ˆì´í„° 1ê°œ** - ì‹œìŠ¤í…œ ê¸°ë³¸ ë™ì‘ í™•ì¸
2. **í¬ë ˆì´í„° 4ê°œ, 1000m ê°„ê²©** - ê²¹ì¹¨ ì—†ì´ ë¶„ë¦¬ í…ŒìŠ¤íŠ¸
3. **í¬ë ˆì´í„° 4ê°œ, ì•½ê°„ ê²¹ì¹¨** - ê²¹ì¹¨ ì²˜ë¦¬ í™•ì¸
4. **í¬ë ˆì´í„° 6ê°œ, ìµœì¢… ë°°ì¹˜** - ì‹¤ì œ ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤

#### ìºì‹œ í´ë¦¬ì–´ ì²´í¬ë¦¬ìŠ¤íŠ¸

ì§€í˜• ë³€ê²½ í›„ ë¬¸ì œ ë°œìƒ ì‹œ:
```bash
# 1. SQLite ìºì‹œ (ìµœìš°ì„ !)
rm -f debug_data/*.sqlite

# 2. Godot ì„í¬íŠ¸ ìºì‹œ
rm -rf .godot/imported/*

# 3. ì‰ì´ë” ìºì‹œ
rm -rf .godot/shader_cache/*

# 4. ë¦¬ì†ŒìŠ¤ UID ë³€ê²½ (ê°•ì œ ë¦¬ë¡œë“œ)
# voxel_graph_planet_v5.tres ì²« ì¤„:
uid://c8m4k5n6p7q8r9s0  # ìƒˆ ëœë¤ UIDë¡œ ë³€ê²½
```

**ì¤‘ìš”**: SQLite ìºì‹œê°€ 99% ë¬¸ì œì˜ ì›ì¸!

### ìµœì¢… ì‘ë™ êµ¬ì„±

[solar_system_setup.gd:277-339](solar_system/solar_system_setup.gd#L277-L339):
```gdscript
# 6ê°œ í¬ë ˆì´í„° - ë‹¤ì–‘í•œ í¬ê¸°, ì¶©ë¶„í•œ ê°„ê²©
1. Landing Basin (0, 0)       - 500m radius, 100m deep (spawn point)
2. North (0, 2000)            - 400m radius, 80m deep
3. South (0, -2000)           - 400m radius, 80m deep
4. East (2000, 0)             - 350m radius, 70m deep
5. West (-2000, 0)            - 350m radius, 70m deep
6. Northeast (1400, 1400)     - 300m radius, 60m deep
```

### í•µì‹¬ êµí›ˆ

1. **ì§€í˜• ë¬¸ì œ â†’ SQLite ìºì‹œë¶€í„° ì‚­ì œ!**
2. **Godot Voxel Smoothstep = íŒŒë¼ë¯¸í„° ìˆœì„œ ë°˜ëŒ€**
3. **SDF Add: ì–‘ìˆ˜ = í•¨ëª°, ìŒìˆ˜ = ìœµê¸°**
4. **ì ì§„ì  í…ŒìŠ¤íŠ¸: 1ê°œ â†’ 4ê°œ â†’ 6ê°œ**
5. **í¬ë ˆì´í„° ê²¹ì¹¨ ì—†ìœ¼ë ¤ë©´ ìµœì†Œ 1000m ê°„ê²© ìœ ì§€**

---

## í–¥í›„ ì§€í˜• í”¼ì²˜: ì‚°ë§¥ & ë™êµ´ ì‹œìŠ¤í…œ

í¬ë ˆì´í„° ì‹œìŠ¤í…œê³¼ ë™ì¼í•œ ë°©ë²•ë¡ ìœ¼ë¡œ ì‚°ë§¥ê³¼ ë™êµ´ì„ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ì‚°ë§¥ ìƒì„±ê¸° (MountainRangeGenerator)

**ê°œë…**: í¬ë ˆì´í„°ì˜ ë°˜ëŒ€ - ìœµê¸°(uplift) ì¤‘ì‹¬

**êµ¬ì¡°**:
```
[ê±°ë¦¬/ë°©í–¥ ê³„ì‚°]
Input X/Z â†’ ì„ /ê³¡ì„ ê¹Œì§€ì˜ ê±°ë¦¬ ê³„ì‚°

[ì‚°ë§¥ í”„ë¡œí•„]
Distance â†’ Smoothstep(ë†’ì´ falloff) â†’ Multiply(peak_height)
         â†’ Smoothstep(ê²½ì‚¬ falloff) â†’ ì§€í˜•ì— Add (ìŒìˆ˜ = ìœµê¸°)

[ë…¸ì´ì¦ˆ ì¶”ê°€]
ì‚°ë§¥ ë†’ì´ Ã— Noise â†’ ë¶ˆê·œì¹™í•œ ë´‰ìš°ë¦¬ ìƒì„±
```

**íŒŒë¼ë¯¸í„°**:
```gdscript
class MountainRangeDef:
    var start_pos: Vector3      # ì‹œì‘ì 
    var end_pos: Vector3        # ëì  (ì„ í˜• ì‚°ë§¥)
    var peak_height: float      # ì •ìƒ ë†’ì´ (ì˜ˆ: 500m)
    var base_width: float       # ì‚°ë§¥ í­ (ì˜ˆ: 800m)
    var slope_steepness: float  # ê²½ì‚¬ ê°€íŒŒë¦„ ì •ë„
    var roughness: float        # í‘œë©´ ê±°ì¹ ê¸° (ë…¸ì´ì¦ˆ ê°•ë„)
```

**ì‚¬ìš© ì˜ˆ**:
```gdscript
var mountain_gen = MountainRangeGenerator.new()
var ranges = [
    MountainRangeDef.new(
        Vector3(-3000, 0, -2000),  # ì‹œì‘
        Vector3(3000, 0, 2000),    # ë
        600.0,                      # 600m ë†’ì´
        1000.0,                     # 1km í­
        0.7,                        # ê°€íŒŒë¥¸ ê²½ì‚¬
        0.3                         # ì¤‘ê°„ ê±°ì¹ ê¸°
    )
]
mountain_gen.add_ranges_to_graph(graph, ranges)
```

**í•µì‹¬ ë…¸ë“œ ì²´ì¸**:
1. ì -ì„  ê±°ë¦¬ ê³„ì‚° (cross product ë°©ì‹)
2. Smoothstepìœ¼ë¡œ ë†’ì´ í”„ë¡œí•„ ìƒì„±
3. FastNoise Ã— ë†’ì´ â†’ ë¶ˆê·œì¹™í•œ ë´‰ìš°ë¦¬
4. **Subtract** (ë˜ëŠ” Add with negative) â†’ ì§€í˜• ìœµê¸°

**ì£¼ì˜ì‚¬í•­**:
- **SDF Subtract = ìœµê¸°** (í¬ë ˆì´í„°ì™€ ë°˜ëŒ€)
- ë…¸ì´ì¦ˆ frequency ì¡°ì •ìœ¼ë¡œ ë´‰ìš°ë¦¬ í¬ê¸° ì œì–´
- ì‚°ë§¥ êµì°¨ ì‹œ `Min` ë˜ëŠ” `SdfSmoothUnion` ì‚¬ìš©

### ë™êµ´ ì‹œìŠ¤í…œ ìƒì„±ê¸° (CaveSystemGenerator)

**ê°œë…**: 3D ë…¸ì´ì¦ˆ ê¸°ë°˜ ë‚´ë¶€ ê³µê°„ ìƒì„±

**êµ¬ì¡°**:
```
[ë™êµ´ ì…êµ¬]
Distance from entrance â†’ Smoothstep â†’ ì…êµ¬ í„°ë„

[ë™êµ´ ë„¤íŠ¸ì›Œí¬]
FastNoise3D (Cellular/Perlin) â†’ Threshold â†’ ë™êµ´ ê³µê°„
InputY (ë†’ì´) â†’ ê¹Šì´ ì œí•œ

[í•©ì„±]
Entrance + Cave_Network â†’ Max â†’ ì§€í˜•ì—ì„œ ë¹¼ê¸°
```

**íŒŒë¼ë¯¸í„°**:
```gdscript
class CaveSystemDef:
    var entrance_pos: Vector3   # ì…êµ¬ ìœ„ì¹˜
    var entrance_radius: float  # ì…êµ¬ í¬ê¸°
    var depth_min: float        # ìµœì†Œ ê¹Šì´ (yì¢Œí‘œ)
    var depth_max: float        # ìµœëŒ€ ê¹Šì´
    var cave_size: float        # ë™êµ´ ê³µê°„ í¬ê¸° (0.0-1.0)
    var density: float          # ë™êµ´ ë°€ë„ (0.0-1.0)
    var noise_scale: float      # ë…¸ì´ì¦ˆ ìŠ¤ì¼€ì¼
```

**ì‚¬ìš© ì˜ˆ**:
```gdscript
var cave_gen = CaveSystemGenerator.new()
var caves = [
    CaveSystemDef.new(
        Vector3(1500, 0, -1000),  # ì…êµ¬ ìœ„ì¹˜
        50.0,                      # 50m ì…êµ¬
        7800.0,                    # ìµœì†Œ ê¹Šì´ (í–‰ì„± ë°˜ì§€ë¦„ - 200m)
        7950.0,                    # ìµœëŒ€ ê¹Šì´ (í‘œë©´ ê·¼ì²˜)
        0.4,                       # ì¤‘ê°„ í¬ê¸° ë™êµ´
        0.3,                       # ì ë‹¹í•œ ë°€ë„
        20.0                       # ë…¸ì´ì¦ˆ ìŠ¤ì¼€ì¼
    )
]
cave_gen.add_caves_to_graph(graph, caves)
```

**í•µì‹¬ ë…¸ë“œ ì²´ì¸**:
1. **FastNoiseCellular** ë˜ëŠ” **FastNoisePerlin** (3D)
2. **Threshold** ë…¸ë“œë¡œ ë™êµ´ ê³µê°„ ê²°ì • (> 0.5 = ê³µê¸°)
3. InputYë¡œ ê¹Šì´ ë§ˆìŠ¤í‚¹
4. ì…êµ¬ í„°ë„ (SdfCapsule ë˜ëŠ” ê±°ë¦¬ ê¸°ë°˜)
5. **Subtract** ë˜ëŠ” **Max** â†’ ì§€í˜•ì—ì„œ ì œê±°

**ë™êµ´ ì…êµ¬ ìƒì„±**:
```
InputX/Y/Z â†’ Distance from entrance_pos â†’ SdfSphere
           â†’ Smoothstep(í„°ë„ í™•ì¥) â†’ ì§€í˜•ì—ì„œ ë¹¼ê¸°
```

**3D ë„¤íŠ¸ì›Œí¬ ìƒì„±**:
```
FastNoise3D(InputX, InputY, InputZ)
  â†’ Add(threshold_adjust)
  â†’ Clamp â†’ Select (> 0 = ë™êµ´ ê³µê°„)
  â†’ Mask by depth (InputY between min/max)
```

**ì£¼ì˜ì‚¬í•­**:
- **3D ë…¸ì´ì¦ˆ í•„ìˆ˜** (X, Y, Z ëª¨ë‘ ì…ë ¥)
- Cellular noise = ë” ë¶ˆê·œì¹™í•œ ë™êµ´
- Perlin noise = ë” ë¶€ë“œëŸ¬ìš´ ë™êµ´
- `SdfSmoothSubtraction`ìœ¼ë¡œ ë¶€ë“œëŸ¬ìš´ ë™êµ´ ë²½
- ê¹Šì´ ì œí•œ ì—†ìœ¼ë©´ í–‰ì„± ë°˜ëŒ€í¸ê¹Œì§€ ëš«ë¦¼!

### í†µí•© ì§€í˜• ìƒì„± íŒŒì´í”„ë¼ì¸

```gdscript
# solar_system_setup.gdì—ì„œ ìˆœì°¨ ì ìš©
var generator = BasePlanetVoxelGraph.duplicate(true)

# 1. í¬ë ˆì´í„° (í•¨ëª°)
var crater_gen = CraterGenerator.new()
crater_gen.add_craters_to_graph(generator, crater_defs)

# 2. ì‚°ë§¥ (ìœµê¸°)
var mountain_gen = MountainRangeGenerator.new()
mountain_gen.add_ranges_to_graph(generator, range_defs)

# 3. ë™êµ´ (ë‚´ë¶€ ê³µê°„)
var cave_gen = CaveSystemGenerator.new()
cave_gen.add_caves_to_graph(generator, cave_defs)

# 4. ì§€í˜•ì— ì ìš©
voxel_terrain.generator = generator
```

### ì„±ëŠ¥ ê³ ë ¤ì‚¬í•­

**ê´œì°®ìŒ**:
- í¬ë ˆì´í„° 50ê°œ + ì‚°ë§¥ 10ê°œ + ë™êµ´ 5ê°œ = ì—¬ì „íˆ ë¹ ë¦„
- ë…¸ë“œ ìˆ˜ëŠ” ì„±ëŠ¥ì— ë¬´ê´€ (ì»´íŒŒì¼ ìµœì í™”ë¨)

**ì£¼ì˜**:
- **3D ë…¸ì´ì¦ˆ (ë™êµ´)** = ê°€ì¥ ë¹„ìŒˆ (X, Y, Z ëª¨ë‘ ìƒ˜í”Œë§)
- ë™êµ´ noise octaveëŠ” 3-4 ì´í•˜ ê¶Œì¥
- ì‚°ë§¥ì€ 2D ê±°ë¦¬ë§Œ ì‚¬ìš©í•˜ë¯€ë¡œ ì €ë ´í•¨

### ë‹¤ìŒ êµ¬í˜„ ìˆœì„œ

1. **ì‚°ë§¥ ì‹œìŠ¤í…œ** (í¬ë ˆì´í„°ë³´ë‹¤ ì‰¬ì›€ - ê°™ì€ 2D ê±°ë¦¬ ê³„ì‚°)
2. **ë™êµ´ ì‹œìŠ¤í…œ** (3D ë…¸ì´ì¦ˆ - ì¢€ ë” ë³µì¡)
3. **í†µí•© í…ŒìŠ¤íŠ¸** (í¬ë ˆì´í„° + ì‚°ë§¥ + ë™êµ´)
4. **ì‰ì´ë” í†µí•©** (ê° í”¼ì²˜ë³„ ìƒ‰ìƒ/ì¬ì§ˆ)

---

## í¬ë ˆì´í„° ë¨¼ì§€ ì•ˆê°œ ì‹œìŠ¤í…œ (2025-01-13) âœ“

### ê°œìš”

í¬ë ˆì´í„° ì£¼ë³€ì— ëŒ€ê¸° íš¨ê³¼ë¥¼ ì£¼ê¸° ìœ„í•œ FogVolume ì‹œìŠ¤í…œ êµ¬í˜„. Godot 4ì˜ ë‚´ì¥ ë³¼ë¥¨ ì•ˆê°œ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì—¬ í¬ë ˆì´í„°ë§ˆë‹¤ ìë™ìœ¼ë¡œ ë¨¼ì§€ ì•ˆê°œë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

### êµ¬í˜„ ë‚´ìš©

**íŒŒì¼**: [solar_system_setup.gd:608-642](solar_system/solar_system_setup.gd#L608-L642)

ìƒˆë¡œìš´ ì •ì  í•¨ìˆ˜ ì¶”ê°€:
```gdscript
static func _add_crater_dust_volumes(body: StellarBody, root: Node3D, craters: Array) -> void
```

### ì£¼ìš” ê¸°ëŠ¥

1. **ìë™ FogVolume ìƒì„±**: ê° í¬ë ˆì´í„°ë§ˆë‹¤ FogVolume ë…¸ë“œ ìë™ ìƒì„±
2. **FogMaterial ì„¤ì •**:
   - ë°€ë„(density): 0.15 - ì€ì€í•œ ì•ˆê°œ
   - ìƒ‰ìƒ(albedo): `Color(0.75, 0.70, 0.60)` - í¬ë ˆì´í„° ë¨¼ì§€ ì‰ì´ë” ìƒ‰ìƒê³¼ ì¼ì¹˜
   - ë°œê´‘(emission): `Color(0.05, 0.05, 0.05)` - ì•„ì£¼ ë¯¸ì„¸í•œ ë¹›
3. **í¬ê¸° ë° ìœ„ì¹˜**:
   - í¬ê¸°: í¬ë ˆì´í„° ë°˜ì§€ë¦„ Ã— 2.2 (ìˆ˜í‰), 60m (ë†’ì´)
   - ìœ„ì¹˜: í¬ë ˆì´í„° ì¤‘ì‹¬, ì§€í‘œë©´ ìœ„ 30m

### ê¸°ìˆ ì  ì„¸ë¶€ì‚¬í•­

#### Godot 4 FogVolume API

**ì¤‘ìš”**: Godot 4ì—ì„œ FogVolume ì†ì„±ì€ ì§ì ‘ ì„¤ì • ë¶ˆê°€. FogMaterialì„ í†µí•´ ì„¤ì •í•´ì•¼ í•¨.

**ì˜ëª»ëœ ë°©ë²•** (ì‘ë™ ì•ˆ í•¨):
```gdscript
fog_volume.density = 0.15  # ì—ëŸ¬!
fog_volume.albedo = Color(...)  # ì—ëŸ¬!
```

**ì˜¬ë°”ë¥¸ ë°©ë²•** ([solar_system_setup.gd:627-632](solar_system/solar_system_setup.gd#L627-L632)):
```gdscript
var fog_material = FogMaterial.new()
fog_material.density = 0.15
fog_material.albedo = Color(0.75, 0.70, 0.60)
fog_material.emission = Color(0.05, 0.05, 0.05)
fog_volume.material = fog_material
```

#### ë…¸ë“œ ê³„ì¸µ êµ¬ì¡°

**ì¤‘ìš”**: `StellarBody`ëŠ” `RefCounted` í´ë˜ìŠ¤ì´ë¯€ë¡œ `add_child()` ë©”ì„œë“œ ì—†ìŒ.

**ì˜ëª»ëœ ë°©ë²•**:
```gdscript
body.add_child(fog_volume)  # ì—ëŸ¬! StellarBodyëŠ” RefCounted
```

**ì˜¬ë°”ë¥¸ ë°©ë²•** ([solar_system_setup.gd:360, 609, 639](solar_system/solar_system_setup.gd#L360)):
```gdscript
# í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜ì— root: Node3D íŒŒë¼ë¯¸í„° ì¶”ê°€
static func _add_crater_dust_volumes(body: StellarBody, root: Node3D, craters: Array)

# root ë…¸ë“œì— ì¶”ê°€
root.add_child(fog_volume)
```

### ë°œìƒí•œ ì—ëŸ¬ ë° í•´ê²°

#### ì—ëŸ¬ 1: Non-static í•¨ìˆ˜ í˜¸ì¶œ
**ì—ëŸ¬**: "Cannot call non-static function "_add_crater_dust_volumes()" from the static function "_setup_rocky_planet()"."

**ì›ì¸**: `_setup_rocky_planet()`ì´ static í•¨ìˆ˜ì¸ë° non-static í•¨ìˆ˜ í˜¸ì¶œ ì‹œë„

**í•´ê²°**: í•¨ìˆ˜ë¥¼ `static func`ë¡œ ë³€ê²½

#### ì—ëŸ¬ 2: SHAPE_BOX ìƒìˆ˜ ì—†ìŒ
**ì—ëŸ¬**: "Cannot find member "SHAPE_BOX" in base "FogVolume"."

**ì›ì¸**: Godot 4ì˜ FogVolumeì€ í•­ìƒ ë°•ìŠ¤ í˜•íƒœì´ë©° `shape` ì†ì„± ì—†ìŒ

**í•´ê²°**: `fog_volume.shape = FogVolume.SHAPE_BOX` ë¼ì¸ ì œê±°. `size` ì†ì„±ë§Œ ì„¤ì •.

#### ì—ëŸ¬ 3: ì†ì„± ì§ì ‘ í• ë‹¹ ë¶ˆê°€
**ì—ëŸ¬**: "Invalid assignment of property or key 'density' with value of type 'float' on a base object of type 'FogVolume'."

**ì›ì¸**: Godot 4ì—ì„œ FogVolume ì†ì„±ì€ FogMaterialì„ í†µí•´ì„œë§Œ ì„¤ì • ê°€ëŠ¥

**í•´ê²°**: FogMaterial ìƒì„± í›„ material ì†ì„±ì— í• ë‹¹

#### ì—ëŸ¬ 4: RefCountedì— add_child ì—†ìŒ
**ì—ëŸ¬**: "Nonexistent function 'add_child' in base 'RefCounted (stellar_body.gd)'."

**ì›ì¸**: StellarBodyëŠ” ë°ì´í„° í´ë˜ìŠ¤(RefCounted)ë¡œ ì”¬ ê·¸ë˜í”„ ë©”ì„œë“œ ì—†ìŒ

**í•´ê²°**: `root: Node3D` íŒŒë¼ë¯¸í„° ì¶”ê°€í•˜ì—¬ ì‹¤ì œ ì”¬ ë…¸ë“œì— ì¶”ê°€

### í†µí•© ì§€ì 

**í˜¸ì¶œ ìœ„ì¹˜**: [solar_system_setup.gd:360](solar_system/solar_system_setup.gd#L360)

```gdscript
# Add dust fog volumes to craters
_add_crater_dust_volumes(body, root, craters)
```

í¬ë ˆì´í„° ìƒì„± ë° ì‰ì´ë” íŒŒë¼ë¯¸í„° ì„¤ì • ì§í›„, ì§€í˜• ê·¸ë˜í”„ ìˆ˜ì • ì „ì— í˜¸ì¶œë¨.

### ìµœì¢… íŒŒë¼ë¯¸í„°

| ì†ì„± | ê°’ | ì„¤ëª… |
|-----|----|----|
| Box Size (X/Z) | crater.radius Ã— 2.2 | í¬ë ˆì´í„°ë³´ë‹¤ ì•½ê°„ ë„“ê²Œ |
| Box Size (Y) | 60m | ì•ˆê°œ ì¸µ ë†’ì´ |
| Position (Y offset) | +30m | ì§€í‘œë©´ ìœ„ 30m |
| Density | 0.15 | ì€ì€í•œ ì•ˆê°œ (ë„ˆë¬´ ì§„í•˜ì§€ ì•Šê²Œ) |
| Albedo | `(0.75, 0.70, 0.60)` | ë² ì´ì§€/í™©í† ìƒ‰ ë¨¼ì§€ |
| Emission | `(0.05, 0.05, 0.05)` | ì•„ì£¼ ë¯¸ì„¸í•œ ìì²´ ë°œê´‘ |

### ì‹œê°ì  íš¨ê³¼

- **ì‰ì´ë” ë¨¼ì§€ ë§/ë ˆì´**: ì§€í‘œë©´ í…ìŠ¤ì²˜ íš¨ê³¼
- **FogVolume**: 3D ê³µê°„ ëŒ€ê¸° íš¨ê³¼
- **ë‘ ì‹œìŠ¤í…œ ì¡°í•©**: ì§€í‘œë©´ + ëŒ€ê¸° ë ˆì´ì–´ë¡œ í˜„ì‹¤ê° ì¦ëŒ€

### ì„±ëŠ¥

- í¬ë ˆì´í„° 6ê°œ = FogVolume 6ê°œ
- FogVolumeì€ Godot 4ì˜ ìµœì í™”ëœ ë‚´ì¥ ê¸°ëŠ¥
- ì„±ëŠ¥ ì˜í–¥ ë¯¸ë¯¸ (ìˆ˜ì‹­ ê°œê¹Œì§€ ë¬¸ì œì—†ìŒ)

### í–¥í›„ ê°œì„  ê°€ëŠ¥ì„±

1. **ë™ì  ì•ˆê°œ**: í’ì†/ë°©í–¥ì— ë”°ë¼ ì•ˆê°œ ì›€ì§ì„
2. **ì‹œê°„ë³„ ë³€í™”**: ë‚®/ë°¤ ì£¼ê¸°ì— ë”°ë¥¸ ë°€ë„ ë³€í™”
3. **ì…ì ì‹œìŠ¤í…œ ì¶”ê°€**: GPUParticles3Dë¡œ ë¯¸ì„¸ ë¨¼ì§€ ì…ì í‘œí˜„
4. **ë†’ì´ë³„ ë°€ë„ ë³€í™”**: ë°”ë‹¥ì— ì§„í•˜ê³  ìœ„ë¡œ ê°ˆìˆ˜ë¡ ì—·ì–´ì§€ëŠ” ê·¸ë¼ë””ì–¸íŠ¸

### ê´€ë ¨ ì‹œìŠ¤í…œ

- **í¬ë ˆì´í„° ìƒì„±**: [crater_generator.gd](solar_system/crater_generator.gd)
- **í¬ë ˆì´í„° ë¨¼ì§€ ì‰ì´ë”**: [planet_ground.gdshader:32-40, 160-187](solar_system/materials/planet_ground.gdshader#L32-L187)
- **ì§€í˜• ì„¤ì •**: [solar_system_setup.gd:236-441](solar_system/solar_system_setup.gd#L236-L441)

---

**ìµœì¢… ì—…ë°ì´íŠ¸:** 2025-01-13
**Godot ë²„ì „:** 4.5
**Voxel í”ŒëŸ¬ê·¸ì¸ ë²„ì „:** Latest (í”„ë¡œì íŠ¸ addons í™•ì¸)
